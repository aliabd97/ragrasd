# ๐ ุฏููู ุงูุงุณุชุฎุฏุงู - ูุธุงู RAG ุงููุญุณูู

## ๐ฏ ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ

ุชู ุชุญุณูู ุงููุธุงู ุจุงูููุฒุงุช ุงูุชุงููุฉ:

### โ 1. ุฅุฌุงุจุงุช ููุตูุฉ ูุทูููุฉ
- ุงููุธุงู ุงูุขู ููุชุจ **ููุงูุฉ ูุงููุฉ** ุจุฏูุงู ูู ุฅุฌุงุจุงุช ูุตูุฑุฉ
- ุงูุฅุฌุงุจุงุช ุชุญุชูู ุนูู:
  - ููุฏูุฉ
  - ุดุฑุญ ุชูุตููู (5-10 ููุฑุงุช)
  - ุฃูุซูุฉ ูุดูุงูุฏ ูู ุงููุตุงุฏุฑ
  - ุฎุงุชูุฉ
  - ูุงุฆูุฉ ุงููุตุงุฏุฑ ุงููุณุชุฎุฏูุฉ

### โ 2. ูุตุงุฏุฑ ูุงุถุญุฉ ุจุงูุฃุณูุงุก ุงูุญููููุฉ
- **ูุจู:** `[ุงููุตุฏุฑ 2]`
- **ุจุนุฏ:** `ุงููุงูู (1/34)` ุฃู `ููุฌ ุงูุจูุงุบุฉ (ุต 156)`

ุงููุธุงู ูุณุชุฎุฑุฌ:
- ุงุณู ุงููุชุงุจ ูู metadata
- ุฑูู ุงูุฌุฒุก/ุงูุตูุญุฉ
- ููุชุจูุง ุจุดูู ูุงุถุญ ุฏุงุฎู ุงููุต

### โ 3. ุฏุนู OpenAI Embeddings
- **ุงููููุฐุฌ ุงููุญูู:** `intfloat/multilingual-e5-large` (ูุฌุงูู)
- **OpenAI:** `text-embedding-3-small` ุฃู `text-embedding-3-large` (ุฃุณุฑุน ูุฃุฏู)

---

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงูููุชุจุงุช

```bash
pip install -r requirements.txt
```

### 2. ุฅุนุฏุงุฏ OpenAI API Key

ุงูุณุฎ ููู `.env.example` ุฅูู `.env`:

```bash
cp .env.example .env
```

ุซู ุนุฏูู ููู `.env` ูุถุน API key ุงูุฎุงุต ุจู:

```
OPENAI_API_KEY=sk-...
```

ููุญุตูู ุนูู API key: https://platform.openai.com/api-keys

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

### ุชุบููุฑ ูููุฐุฌ Embeddings

ูู ููู `config.yaml`ุ ููููู ุงุฎุชูุงุฑ:

#### ุงุณุชุฎุฏุงู OpenAI (ููุตู ุจู):

```yaml
embeddings:
  provider: "openai"

  openai:
    model: "text-embedding-3-small"  # ุฃู "text-embedding-3-large"
    dimension: 1536
```

#### ุงุณุชุฎุฏุงู ุงููููุฐุฌ ุงููุญูู (ูุฌุงูู):

```yaml
embeddings:
  provider: "sentence_transformers"

  sentence_transformers:
    model: "intfloat/multilingual-e5-large"
    dimension: 1024
```

---

## ๐ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฎูุงุฑ 1: ุจุงุณุชุฎุฏุงู OpenAI (ููุตู ุจู)

```bash
cd build
python step3_embeddings_openai.py
```

**ุงููููุฒุงุช:**
- โ ุฃุณุฑุน
- โ ุฃุฏู ููุนุฑุจูุฉ
- โ ูุง ูุญุชุงุฌ GPU
- โ๏ธ ูุญุชุงุฌ API key
- โ๏ธ ูู ุชูููุฉ (ููุฎูุถุฉ ุฌุฏุงู)

### ุงูุฎูุงุฑ 2: ุจุงุณุชุฎุฏุงู ุงููููุฐุฌ ุงููุญูู (ูุฌุงูู)

```bash
cd build
python step3_embeddings_E5.py
```

**ุงููููุฒุงุช:**
- โ ูุฌุงูู ุชูุงูุงู
- โ ูุนูู ุจุฏูู ุฅูุชุฑูุช
- โ๏ธ ุฃุจุทุฃ ููููุงู
- โ๏ธ ูุญุชุงุฌ ุฐุงูุฑุฉ ูุจูุฑุฉ

---

## ๐ ุงุณุชุฎุฏุงู ุงููุธุงู

### ุทุฑููุฉ 1: ูู ููู Python

ูู ุจุชุนุฏูู ููู `build/step5_rag_system.py`:

```python
from step5_rag_system import RAGSystem

# ุชููุฆุฉ ุงููุธุงู
rag = RAGSystem(
    embeddings_provider="openai",  # ุฃู "sentence_transformers"
    embeddings_model="text-embedding-3-small",
    llm_provider="openai",
    llm_model="gpt-4o-mini"
)

# ุทุฑุญ ุณุคุงู
result = rag.query("ูุง ูู ููููู ุงูุฅูุงูุฉ ูู ุงููุฐูุจ ุงูุดูุนูุ")

# ุนุฑุถ ุงูุฅุฌุงุจุฉ
print(result['answer'])
```

ุซู ุดุบูู:

```bash
cd build
python step5_rag_system.py
```

### ุทุฑููุฉ 2: ุงุณุชุฎุฏุงู interactive

ููููู ุฅูุดุงุก ููู `interactive_rag.py`:

```python
from build.step5_rag_system import RAGSystem
from dotenv import load_dotenv

load_dotenv()

# ุชููุฆุฉ ุงููุธุงู
print("โ๏ธ ุชููุฆุฉ ูุธุงู RAG...\n")
rag = RAGSystem(
    embeddings_provider="openai",
    embeddings_model="text-embedding-3-small",
    llm_model="gpt-4o-mini"
)

print("โ ุงููุธุงู ุฌุงูุฒ!\n")
print("=" * 70)

# ุญููุฉ ุงูุฃุณุฆูุฉ
while True:
    question = input("\n๐ ุงูุชุจ ุณุคุงูู (ุฃู 'exit' ููุฎุฑูุฌ): ")

    if question.lower() in ['exit', 'quit', 'ุฎุฑูุฌ']:
        print("ูุฏุงุนุงู!")
        break

    if not question.strip():
        continue

    # ุงูุญุตูู ุนูู ุงูุฅุฌุงุจุฉ
    result = rag.query(question)

    # ุนุฑุถ ุงูุฅุฌุงุจุฉ
    print("\n" + "=" * 70)
    print("๐ ุงูุฅุฌุงุจุฉ:")
    print("=" * 70)
    print()
    print(result['answer'])
    print()
    print("=" * 70)
    print(f"โ ุชู ุงุณุชุฎุฏุงู {result['num_sources']} ูุตุฏุฑ")
    print("=" * 70)
```

---

## ๐ ุฃูุซูุฉ ุนูู ุงูุฅุฌุงุจุงุช

### ูุซุงู 1: ุณุคุงู ุนู ุชุนุฑูู

**ุงูุณุคุงู:** ูุง ูู ููููู ุงูุฅูุงูุฉุ

**ุงูุฅุฌุงุจุฉ (ููุฎุตุฉ):**
```
## ููููู ุงูุฅูุงูุฉ

### ุงูููุฏูุฉ
ุงูุฅูุงูุฉ ูู ุฃูู ุงูููุงููู ูู ุงููุฐูุจ ุงูุดูุนู...

### ุงูุดุฑุญ ุงูุชูุตููู
ูุฑุฏ ูู ุงููุงูู (1/34) ุฃู ุงูุฅูุงูุฉ ูู...

ูุฐูุฑ ูู ููุฌ ุงูุจูุงุบุฉ (ุต 156) ุฃู...

### ุงูุดูุงูุฏ ูุงูุฃุฏูุฉ
ูู ุงูุฃุฏูุฉ ุนูู ุฐูู ูุง ุฌุงุก ูู...

### ุงูุฎุงุชูุฉ
...

### ุงููุตุงุฏุฑ ุงููุณุชุฎุฏูุฉ:
1. ุงููุงูู (1/34)
2. ููุฌ ุงูุจูุงุบุฉ (ุต 156)
3. ...
```

---

## ๐๏ธ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช

### ุชุบููุฑ ูููุฐุฌ LLM

ูู `step5_rag_system.py`:

```python
rag = RAGSystem(
    llm_model="gpt-4o"  # ููุฌูุฏุฉ ุงูุฃุนูู (ุฃุบูู)
    # ุฃู
    llm_model="gpt-4o-mini"  # ุฌูุฏุฉ ุฌูุฏุฉ (ุฃุฑุฎุต)
)
```

### ุชุบููุฑ ุนุฏุฏ ุงููุตุงุฏุฑ

```python
result = rag.query(
    question="...",
    n_results=20  # ุนุฏุฏ ุงููุชุงุฆุฌ (ุงูุงูุชุฑุงุถู 10)
)
```

### ููุชุฑุฉ ุญุณุจ ุงูููุน

```python
result = rag.query(
    question="...",
    include_types=['paragraph']  # ููุท paragraphs
    # ุฃู
    include_types=['section', 'paragraph']  # sections + paragraphs
)
```

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: `OPENAI_API_KEY not found`

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅูุดุงุก ููู `.env`
2. ุชุฃูุฏ ูู ูุชุงุจุฉ `OPENAI_API_KEY=sk-...` ุจุดูู ุตุญูุญ
3. ุชุฃูุฏ ูู ุชุญููู dotenv ูู ุงูููุฏ

### ุฎุทุฃ: `Collection not found`

**ุงูุญู:**
1. ูู ุจุชุดุบูู `step3_embeddings_openai.py` ุฃููุงู ูุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุฃูุฏ ูู ุฃู ุงุณู collection ุตุญูุญ ูู ุงูููุฏ

### ุงูุฅุฌุงุจุงุช ูุตูุฑุฉ ุฌุฏุงู

**ุงูุญู:**
1. ุชุญูู ูู ุฃู `max_tokens` ูู config.yaml = 3000
2. ุฌุฑุจ ูููุฐุฌ ุฃูุถู ูุซู `gpt-4o`
3. ุชุฃูุฏ ูู ุฃู ุงูู prompt ูุทูุจ ุฅุฌุงุจุฉ ููุตูุฉ

### ุงููุตุงุฏุฑ ุชุธูุฑ ูู [ุงููุตุฏุฑ X]

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู `step5_rag_system.py` ุงูุฌุฏูุฏ
2. ุชุญูู ูู ุฃู metadata ุชุญุชูู ุนูู ูุนูููุงุช ุงููุชุงุจ
3. ุฑุงุฌุน ุฏุงูุฉ `build_sources_list()` ูู ุงูููุฏ

---

## ๐ ููุงุฑูุฉ ุงูููุงุฐุฌ

| ุงูููุฒุฉ | OpenAI | ุงููููุฐุฌ ุงููุญูู |
|--------|--------|----------------|
| ุงูุฌูุฏุฉ | โญโญโญโญโญ | โญโญโญโญ |
| ุงูุณุฑุนุฉ | โกโกโกโกโก | โกโกโก |
| ุงูุชูููุฉ | ๐ฐ ููุฎูุถุฉ | ูุฌุงูู |
| ูุญุชุงุฌ API | โ | โ |
| ูุญุชุงุฌ GPU | โ | ููุถูู |

---

## ๐ก ูุตุงุฆุญ

1. **ููุงุณุชุฎุฏุงู ุงููููู:** ุงุณุชุฎุฏู OpenAI (ุฃุณุฑุน ูุฃุฏู)
2. **ููุชุฌุฑุจุฉ ูุงูุชุทููุฑ:** ุงุณุชุฎุฏู ุงููููุฐุฌ ุงููุญูู (ูุฌุงูู)
3. **ููุฌูุฏุฉ ุงููุตูู:** ุงุณุชุฎุฏู `gpt-4o` + `text-embedding-3-large`
4. **ูุชูููุฑ ุงูุชูููุฉ:** ุงุณุชุฎุฏู `gpt-4o-mini` + `text-embedding-3-small`

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุฑุงุฌุน ูุฐุง ุงูุฏููู
2. ุชุญูู ูู ููู `config.yaml`
3. ุชุฃูุฏ ูู ุตุญุฉ `.env`
4. ุฑุงุฌุน ุงูุฃุฎุทุงุก ูู ุงูู console

---

## ๐ ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ูุชูููุฏ:
- โ ุฅุฌุงุจุงุช ุทูููุฉ ูููุตูุฉ
- โ ูุตุงุฏุฑ ูุงุถุญุฉ ุจุงูุฃุณูุงุก ุงูุญููููุฉ
- โ ุฏุนู OpenAI ููุฌูุฏุฉ ูุงูุณุฑุนุฉ
- โ ูุฑููุฉ ูู ุงูุฅุนุฏุงุฏุงุช

**ุงุณุชูุชุน ุจุงูุงุณุชุฎุฏุงู! ๐**
