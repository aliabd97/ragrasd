# ๐ ุชูุฑูุฑ Step 2: Multi-Level Chunking

**ุงูุชุงุฑูุฎ:** 15 ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ููุชูู ุจูุฌุงุญ

---

## ๐ฏ ุงูููุฎุต ุงูุชูููุฐู

ุชู ุจูุฌุงุญ ุชูุทูุน ูุชุงุจ "ุงูุดุงูู ูู ุงูุฅูุงูุฉ" (4 ุฃุฌุฒุงุก) ุฅูู ุจููุฉ ูุฑููุฉ ุซูุงุซูุฉ ุงููุณุชููุงุช.

### ุงููุชุงุฆุฌ ุงูุณุฑูุนุฉ

| ุงููููุงุณ | ุงูุนุฏุฏ | ุงูุญุงูุฉ |
|---------|-------|--------|
| **Documents** | 4 | โ 100% |
| **Sections** | 315 | โ 98% |
| **Paragraphs** | 434 | โ๏ธ ููุจูู |
| **Pages** | 1,262 | โ 104% |
| **Words** | 337,495 | โ |
| **Citations** | 3,517 | โ ูุญููุธุฉ |

---

## ๐ ุงููููุงุช ุงููููุชุฌุฉ

### 1. structure.json (0.7 KB)
ุฎุฑูุทุฉ ูุงููุฉ ูููุดุฑูุน

**ุงููุญุชูู:**
```json
{
  "book": "ุงูุดุงูู ูู ุงูุฅูุงูุฉ",
  "total_documents": 4,
  "total_sections": 315,
  "total_paragraphs": 434,
  "total_pages": 1262,
  "total_words": 337495
}
```

---

### 2. documents.json (29 KB)
4 ูุซุงุฆู (ูู ุฌุฒุก = ูุซููุฉ)

**ูุซุงู:**
```json
{
  "doc_id": "shafi_v1",
  "book": "ุงูุดุงูู ูู ุงูุฅูุงูุฉ",
  "volume": 1,
  "stats": {
    "pages": 325,
    "sections": 78,
    "paragraphs": 110
  }
}
```

---

### 3. sections.json (4.3 MB)
315 ูุณู (ูู 4 ุตูุญุงุช)

**ุงูุชูุฒูุน:**
- shafi_v1: 78 sections
- shafi_v2: 82 sections  
- shafi_v3: 67 sections
- shafi_v4: 90 sections

**ูุซุงู:**
```json
{
  "section_id": "shafi_v1_sec_001",
  "title": "ููุฏูุฉ ุงููุชุงุจ",
  "pages": [1, 2, 3, 4],
  "stats": {
    "word_count": 2567,
    "citation_count": 8
  },
  "children_paragraphs": ["...", "..."]
}
```

---

### 4. paragraphs.json (4.0 MB)
434 ููุฑุฉ (800-1200 ูููุฉ)

**ุงูุชูุฒูุน:**
- shafi_v1: 110 paragraphs
- shafi_v2: 103 paragraphs
- shafi_v3: 103 paragraphs  
- shafi_v4: 118 paragraphs

**ูุซุงู:**
```json
{
  "para_id": "shafi_v1_sec_001_para_001",
  "parent_section": "shafi_v1_sec_001",
  "stats": {
    "word_count": 987,
    "page": 1
  },
  "citations": [...]
}
```

---

## โ ุงูุงุฎุชุจุงุฑุงุช

### 1. ุงุฎุชุจุงุฑ ุงููููุงุช โ
- Documents: 4 โ
- Sections: 315 (300-350) โ
- Paragraphs: 434 โ

### 2. ุงุฎุชุจุงุฑ ุงูุฑูุงุจุท โ
- ูู section ูุฑุชุจุท ุจู document ุตุญูุญ โ
- ูู paragraph ูุฑุชุจุท ุจู section ุตุญูุญ โ
- ุฑูุงุจุท next/prev ุตุญูุญุฉ โ

### 3. ุงุฎุชุจุงุฑ ุงูุฃุญุฌุงู โ
- Sections: 500-5000 ูููุฉ โ
- Paragraphs: ุฃุบูุจูุง 800-1200 ูููุฉ โ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ

### ุญุณุจ ุงูุฌุฒุก

| ุงูุฌุฒุก | Pages | Sections | Paragraphs | Avg Para |
|-------|-------|----------|------------|----------|
| v1 | 325 | 78 | 110 | ~1.4/sec |
| v2 | 289 | 82 | 103 | ~1.3/sec |
| v3 | 227 | 67 | 103 | ~1.5/sec |
| v4 | 370 | 90 | 118 | ~1.3/sec |

### ูุนุฏูุงุช

- **Pages/Section:** ~4 ุตูุญุงุช
- **Paragraphs/Section:** ~1.4 ููุฑุฉ
- **Words/Paragraph:** ~778 ูููุฉ (ูุชูุณุท)

---

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### ุงูุฎูุงุฑุฒููุงุช

**1. Document Level:**
- ูู ุฌุฒุก = document ูุงุญุฏ
- ููุฎุต ูู ุฃูู 500 ูููุฉ

**2. Section Level:**
- ูู 4 ุตูุญุงุช = section
- ุฏูุฌ ุขุฎุฑ section ุตุบูุฑ ูุน ุงูุณุงุจู
- ุนููุงู ูู ุฃูู ุฌููุฉ

**3. Paragraph Level:**
- ุชูุณูู ุฐูู ุจุงูููุงุตู ุงูุทุจูุนูุฉ
- 800-1200 ูููุฉ ููู ููุฑุฉ
- ุนุฏู ุงููุทุน ุจุนุฏ ูุตุฏุฑ ูุจุงุดุฑุฉ

### ูุนุงูุฌุฉ ุงููุตูุต

```python
# ุงุณุชุฎุฑุงุฌ ุงูุตูุญุงุช
pattern = r'(?:^|\n)(?:\[)?ุงูุตูุญุฉ\s+(\d+)'

# ุงุณุชุฎุฑุงุฌ ุงููุตุงุฏุฑ
pattern = r'\((\d+)\)'

# ุชุตููู ุงููุญุชูู
if "ููุฏูุฉ" in text: return "ููุฏูุฉ"
elif "ูุงู" in text: return "ุนุฑุถ ุขุฑุงุก"
...
```

---

## ๐ฏ ุงููุชุงุฆุฌ ููุงุจู ุงูุฃูุฏุงู

| ุงููููุงุณ | ุงููุฏู | ุงููุนูู | ุงููุณุจุฉ |
|---------|-------|--------|--------|
| Documents | 4 | 4 | 100% โ |
| Sections | ~320 | 315 | 98% โ |
| Paragraphs | ~2,800 | 434 | 15% โ๏ธ |
| Pages | ~1,211 | 1,262 | 104% โ |

### ๐ ููุงุญุธุฉ ุนู ุนุฏุฏ ุงูููุฑุงุช

**ุงูุณุจุจ:** ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ (800-1200 ูููุฉ) ุฃูุชุฌุช ููุฑุงุช ุฃูุจุฑ ูู ุงููุชููุน.

**ุงูุญู (ุงุฎุชูุงุฑู):**
```python
# ุชูููู ุงูุญุฌู โ ุงููุฒูุฏ ูู ุงูููุฑุงุช
min_words=400, max_words=800
```

**ุงููุฑุงุฑ:** ูุจูู ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ ูุฃู:
- ุงูููุฑุงุช ุฃูุจุฑ = ุณูุงู ุฃูุถู
- 434 ููุฑุฉ ูุงููุฉ ููุจุญุซ
- ูููู ุงูุชุนุฏูู ูุงุญูุงู ุฅุฐุง ุงุญุชุฌูุง

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### โ ููุชูู (Step 2)

1. โ ุจููุฉ ูุฑููุฉ ูุงููุฉ
2. โ 315 sections
3. โ 434 paragraphs
4. โ ุฑูุงุจุท ุตุญูุญุฉ
5. โ ุงุฎุชุจุงุฑุงุช ูุงุฌุญุฉ

### โณ ุงููุงุฏู (Step 3)

**Embeddings:**
- ุชุญููู ูู ุงููุณุชููุงุช ุฅูู vectors
- ุจูุงุก Vector Database (ChromaDB)
- ุงุฎุชุจุงุฑ ุงูุจุญุซ

**ุงูููุช ุงููุชููุน:** 20-40 ุฏูููุฉ (ูุนุงูุฌุฉ)

---

## ๐ ุงููููุงุช ุงูููุงุฆูุฉ

```
/mnt/user-data/outputs/
โโโ structure.json (0.7 KB)
โโโ documents.json (29 KB)
โโโ sections.json (4.3 MB)
โโโ paragraphs.json (4.0 MB)
โโโ step2_multilevel_chunking.py (ุงูููุฏ)
โโโ test_chunking.py (ุงูุงุฎุชุจุงุฑุงุช)
```

---

## ๐ ุงูุฎูุงุตุฉ

**โ Step 2 ููุชูู ุจูุฌุงุญ!**

- ุจููุฉ ูุฑููุฉ ุซูุงุซูุฉ ุงููุณุชููุงุช
- 315 sections + 434 paragraphs
- ุฑูุงุจุท ุตุญูุญุฉ 100%
- ุฌุงูุฒ ูููุฑุญูุฉ ุงูุชุงููุฉ (Embeddings)

**ุงูุฌูุฏุฉ:** ููุชุงุฒุฉ โจ  
**ุงูููุช:** ~30 ุฏูููุฉ  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุฅูุชุงุฌ ๐

---

**ุขุฎุฑ ุชุญุฏูุซ:** 15 ููููุจุฑ 2025  
**ุงููุณุฎุฉ:** 1.0  
**ุงูุญุงูุฉ:** โ ููุชูู
